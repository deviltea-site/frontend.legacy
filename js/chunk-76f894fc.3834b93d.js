(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76f894fc"],{2909:function(t,e,r){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r.d(e,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return a(t)||n(t)||i()}},"4de4":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").filter,i=r("1dde"),c=r("ae40"),s=i("filter"),o=c("filter");a({target:"Array",proto:!0,forced:!s||!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},ad3b:function(t,e,r){},c5fd:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"view-container content-container",class:{loading:t.isLoading},attrs:{id:"article-list"}},[t.isLoading?r("CircularProgress",{attrs:{color:"#ccc"}}):r("ul",[t._l(t.sortedArticlesMeta,(function(e,a){return[0!==a?r("div",{key:"article-info-divider-"+a,staticClass:"divider"}):t._e(),r("ArticleListItem",{key:"article-info-"+e.id,attrs:{"article-meta":e}})]}))],2),t.isDevelopment?r("DButton",{staticClass:"new-article-btn",attrs:{to:{name:"NewArticle"}}},[r("DIcon",{attrs:{name:"plus"}}),r("span",[t._v("寫新文章")])],1):t._e()],1)},n=[],i=(r("4de4"),r("4160"),r("caad"),r("d81d"),r("45fc"),r("d3b7"),r("ac1f"),r("2532"),r("3ca3"),r("1276"),r("159b"),r("ddb0"),r("2909")),c=(r("96cf"),r("1da1")),s=r("d4ec"),o=r("bee2"),u=r("99de"),l=r("7e84"),d=r("262e"),f=r("9ab4"),p=r("60a3"),h=r("ac1a"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",[r("router-link",{staticClass:"article-list-item",attrs:{to:{name:"Article",params:{articleId:t.articleMeta.id}}}},[r("div",{staticClass:"thumb"},[t.isDevelopment?r("DButton",{staticClass:"edit-article-btn",attrs:{to:{name:"EditArticle",params:{articleId:t.articleMeta.id}}},on:{click:function(t){t.stopPropagation()}}},[r("DIcon",{attrs:{name:"pencil"}}),r("span",[t._v("編輯文章")])],1):t._e(),t.articleMeta.thumb?r("LazyImage",{attrs:{src:t.articleMeta.thumb}}):r("div",{staticClass:"icon-container"},[r("DIcon",{attrs:{name:"book-open-variant"}})],1)],1),r("div",{staticClass:"info"},[r("div",{staticClass:"info__title"},[t._v(t._s(t.articleMeta.title))]),r("div",{staticClass:"info__date"},[r("span",[t._v(t._s(t.time.text))]),r("span",[t._v(t._s(t.time.date.toLocaleString()))])]),r("div",{staticClass:"info__description"},[t._v(t._s(t.articleMeta.description))]),r("div",{staticClass:"info-meta"},[r("div",{staticClass:"info-meta__category"},[r("span",{staticClass:"label"},[t._v("分類：")]),r("router-link",{staticClass:"link",attrs:{to:{name:"ArticleList",query:{categories:t.articleMeta.category}}}},[t._v(t._s(t.articleMeta.category))])],1),t.articleMeta.tags.length>0?r("div",{staticClass:"info-meta__tags"},[r("span",{staticClass:"label"},[t._v("標籤：")]),t._l(t.articleMeta.tags,(function(e){return r("router-link",{key:"article-"+t.articleMeta.id+"-tag-"+e,staticClass:"tag",attrs:{to:{name:"ArticleList",query:{tags:e}}}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()])])])],1)},m=[],b=r("acd0"),v=r("ec53"),O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("img",t._b({attrs:{src:t.currentSrc}},"img",t.attrs,!1))},j=[],y=r("e8f5"),_=r("6ddb"),w=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.attrs={},t.currentSrc="/images/loading.gif",t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"created",value:function(){var t=this,e=Object.assign({},this.$attrs),r=this.src;this.attrs=e;var a=document.createElement("img");a.onload=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])(100);case 2:t.currentSrc=r;case 3:case"end":return e.stop()}}),e)}))),a.src=r}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],w.prototype,"src",void 0),w=Object(f["a"])([Object(p["a"])({components:{CircularProgress:y["a"]}})],w);var k=w,x=k,M=r("2877"),C=Object(M["a"])(x,O,j,!1,null,null,null),A=C.exports,D=function(t){function e(){return Object(s["a"])(this,e),Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"time",get:function(){return{text:this.articleMeta.updatedTime?"上次更新":"發表時間",date:new Date(this.articleMeta.updatedTime||this.articleMeta.createdTime)}}},{key:"isDevelopment",get:function(){return h["c"].isDevelopment}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],D.prototype,"articleMeta",void 0),D=Object(f["a"])([Object(p["a"])({components:{DButton:b["a"],DIcon:v["a"],LazyImage:A}})],D);var I=D,L=I,R=Object(M["a"])(L,g,m,!1,null,null,null),T=R.exports,P=r("f7e4"),E=(r("ad3b"),10),$=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.currentPage=0,t.articlesId=[],t.articlesMeta=[],t.isLoading=!1,t.filterOptions=[],t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"onRouteChange",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.detectFilterOptions(e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadAllArticlesId",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,Object(P["b"])();case 3:e=t.sent,r=e.articles,this.articlesId=r,this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadNextPageMetas",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,r=this.currentPage+1,a=this.articlesId.filter((function(t,e){return e>=(r-1)*E&&e<r*E})),0!==a.length){t.next=8;break}return t.next=6,Object(_["a"])(300);case 6:return this.isLoading=!1,t.abrupt("return");case 8:return t.next=10,Promise.all(a.map((function(t){return Object(P["c"])(t)})));case 10:return n=t.sent,(e=this.articlesMeta).push.apply(e,Object(i["a"])(n)),this.currentPage+=1,t.next=15,Object(_["a"])(500);case 15:this.isLoading=!1;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadInitData",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadAllArticlesId();case 2:return t.next=4,this.loadNextPageMetas();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"detectFilterOptions",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,r=[],a=e.query,a.tags&&a.tags.split(",").forEach((function(t){return r.push({accordingTo:"tag",value:t})})),a.categories&&a.categories.split(",").forEach((function(t){return r.push({accordingTo:"category",value:t})})),this.filterOptions=r,t.next=8,Object(_["a"])(300);case 8:this.isLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadInitData();case 2:return t.next=4,this.detectFilterOptions(this.$route);case 4:this.$emit("render");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"filteredArticlesMeta",get:function(){var t=this;return 0===this.filterOptions.length?this.articlesMeta:this.articlesMeta.filter((function(e){var r=t.filterOptions,a={category:function(t){return e.category===t.value},tag:function(t){return e.tags.includes(t.value)}};return r.map((function(t){return a[t.accordingTo](t)})).some((function(t){return t}))}))}},{key:"sortedArticlesMeta",get:function(){return this.filteredArticlesMeta.sort((function(t,e){return new Date(t.createdTime).getTime()-new Date(e.createdTime).getTime()}))}},{key:"isDevelopment",get:function(){return h["c"].isDevelopment}}]),e}(p["c"]);Object(f["a"])([Object(p["d"])("$route")],$.prototype,"onRouteChange",null),$=Object(f["a"])([Object(p["a"])({components:{ArticleListItem:T,CircularProgress:y["a"],DButton:b["a"],DIcon:v["a"]}})],$);var S=$,B=S,q=Object(M["a"])(B,a,n,!1,null,null,null);e["default"]=q.exports}}]);
//# sourceMappingURL=chunk-76f894fc.3834b93d.js.map