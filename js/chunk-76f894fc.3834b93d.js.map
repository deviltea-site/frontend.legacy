{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/pages/ArticleList.vue?a4fd","webpack:///./src/components/ArticleList/ArticleListItem.vue?1002","webpack:///./src/components/Basic/LazyImage.vue?4701","webpack:///./src/components/Basic/LazyImage.vue","webpack:///./src/components/Basic/LazyImage.vue?fcf4","webpack:///./src/components/Basic/LazyImage.vue?ad98","webpack:///./src/components/ArticleList/ArticleListItem.vue","webpack:///./src/components/ArticleList/ArticleListItem.vue?72c8","webpack:///./src/components/ArticleList/ArticleListItem.vue?a4d1","webpack:///./src/pages/ArticleList.vue","webpack:///./src/pages/ArticleList.vue?614b","webpack:///./src/pages/ArticleList.vue?37d6"],"names":["_arrayWithoutHoles","arr","Array","isArray","i","arr2","length","_iterableToArray","iter","Symbol","iterator","Object","prototype","toString","call","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","class","loading","isLoading","attrs","_l","meta","index","key","_e","name","_v","staticRenderFns","params","articleId","articleMeta","id","on","$event","stopPropagation","thumb","_s","title","time","text","date","toLocaleString","description","query","categories","category","tags","tag","_b","currentSrc","$attrs","src","imgElement","document","createElement","onload","components","CircularProgress","component","updatedTime","Date","createdTime","app","isDevelopment","DButton","DIcon","LazyImage","COUNT_OF_ARTICLES_PER_PAGE","currentPage","articlesId","articlesMeta","filterOptions","newRoute","detectFilterOptions","articles","nextPage","Promise","all","map","nextPageMetas","push","loadAllArticlesId","loadNextPageMetas","route","split","forEach","accordingTo","value","loadInitData","$route","$emit","options","handlers","option","includes","some","match","filteredArticlesMeta","sort","a","b","getTime","ArticleListItem"],"mappings":"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","file":"js/chunk-76f894fc.3834b93d.js","sourcesContent":["export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"view-container content-container\",class:{\n  loading: _vm.isLoading\n},attrs:{\"id\":\"article-list\"}},[(_vm.isLoading)?_c('CircularProgress',{attrs:{\"color\":\"#ccc\"}}):_c('ul',[_vm._l((_vm.sortedArticlesMeta),function(meta,index){return [(index !== 0)?_c('div',{key:(\"article-info-divider-\" + index),staticClass:\"divider\"}):_vm._e(),_c('ArticleListItem',{key:(\"article-info-\" + (meta.id)),attrs:{\"article-meta\":meta}})]})],2),(_vm.isDevelopment)?_c('DButton',{staticClass:\"new-article-btn\",attrs:{\"to\":{\n    name: 'NewArticle'\n  }}},[_c('DIcon',{attrs:{\"name\":\"plus\"}}),_c('span',[_vm._v(\"寫新文章\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_c('router-link',{staticClass:\"article-list-item\",attrs:{\"to\":{ name: 'Article', params: { articleId: _vm.articleMeta.id } }}},[_c('div',{staticClass:\"thumb\"},[(_vm.isDevelopment)?_c('DButton',{staticClass:\"edit-article-btn\",attrs:{\"to\":{ name: 'EditArticle', params: { articleId: _vm.articleMeta.id } }},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('DIcon',{attrs:{\"name\":\"pencil\"}}),_c('span',[_vm._v(\"編輯文章\")])],1):_vm._e(),(_vm.articleMeta.thumb)?_c('LazyImage',{attrs:{\"src\":_vm.articleMeta.thumb}}):_c('div',{staticClass:\"icon-container\"},[_c('DIcon',{attrs:{\"name\":\"book-open-variant\"}})],1)],1),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"info__title\"},[_vm._v(_vm._s(_vm.articleMeta.title))]),_c('div',{staticClass:\"info__date\"},[_c('span',[_vm._v(_vm._s(_vm.time.text))]),_c('span',[_vm._v(_vm._s(_vm.time.date.toLocaleString()))])]),_c('div',{staticClass:\"info__description\"},[_vm._v(_vm._s(_vm.articleMeta.description))]),_c('div',{staticClass:\"info-meta\"},[_c('div',{staticClass:\"info-meta__category\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"分類：\")]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":{\n              name: 'ArticleList',\n              query: { categories: _vm.articleMeta.category }\n            }}},[_vm._v(_vm._s(_vm.articleMeta.category))])],1),(_vm.articleMeta.tags.length > 0)?_c('div',{staticClass:\"info-meta__tags\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"標籤：\")]),_vm._l((_vm.articleMeta.tags),function(tag){return _c('router-link',{key:(\"article-\" + (_vm.articleMeta.id) + \"-tag-\" + tag),staticClass:\"tag\",attrs:{\"to\":{ name: 'ArticleList', query: { tags: tag } }}},[_vm._v(\" \"+_vm._s(tag)+\" \")])})],2):_vm._e()])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('img',_vm._b({attrs:{\"src\":_vm.currentSrc}},'img',_vm.attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CircularProgress from '@/components/Basic/CircularProgress.vue'\nimport { delay } from '@/utils/util'\n\n@Component({\n  components: {\n    CircularProgress\n  }\n})\nexport default class LazyImage extends Vue {\n  @Prop() private src!: string\n  private attrs: Record<string, string> = {}\n  private currentSrc = '/images/loading.gif'\n\n  private created () {\n    const { ...attrs } = this.$attrs\n    const src = this.src\n    this.attrs = attrs\n    const imgElement = document.createElement('img')\n    imgElement.onload = async () => {\n      await delay(100)\n      this.currentSrc = src\n    }\n    imgElement.src = src\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LazyImage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LazyImage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LazyImage.vue?vue&type=template&id=047cce64&\"\nimport script from \"./LazyImage.vue?vue&type=script&lang=ts&\"\nexport * from \"./LazyImage.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport DButton from '@/components/Basic/DButton.vue'\nimport DIcon from '@/components/Basic/DIcon.vue'\nimport LazyImage from '@/components/Basic/LazyImage.vue'\nimport { ArticleMeta } from '@/interfaces/Article'\nimport appModule from '@/store/modules/app'\n\n@Component({\n  components: {\n    DButton,\n    DIcon,\n    LazyImage\n  }\n})\nexport default class ArticleListItem extends Vue {\n  @Prop() private articleMeta!: ArticleMeta\n\n  private get time () {\n    return {\n      text: this.articleMeta.updatedTime ? '上次更新' : '發表時間',\n      date: new Date(this.articleMeta.updatedTime || this.articleMeta.createdTime)\n    }\n  }\n\n  private get isDevelopment () {\n    return appModule.isDevelopment\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleListItem.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleListItem.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ArticleListItem.vue?vue&type=template&id=32fc00e9&\"\nimport script from \"./ArticleListItem.vue?vue&type=script&lang=ts&\"\nexport * from \"./ArticleListItem.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Watch } from 'vue-property-decorator'\nimport { Route } from 'vue-router'\nimport appModule from '../store/modules/app'\nimport ArticleListItem from '@/components/ArticleList/ArticleListItem.vue'\nimport CircularProgress from '@/components/Basic/CircularProgress.vue'\nimport DButton from '@/components/Basic/DButton.vue'\nimport DIcon from '@/components/Basic/DIcon.vue'\nimport { delay } from '@/utils/util'\nimport { ArticleMeta } from '../interfaces/Article'\nimport { getArticleList, getArticleMeta } from '@/controllers/articles'\nimport '@/assets/scss/pages/article-list.scss'\n\nconst COUNT_OF_ARTICLES_PER_PAGE = 10\n\ninterface FilterOption {\n  accordingTo: 'category' | 'tag';\n  value: string;\n}\n\n@Component({\n  components: {\n    ArticleListItem,\n    CircularProgress,\n    DButton,\n    DIcon\n  }\n})\nexport default class ArticleList extends Vue {\n  private currentPage = 0\n  private articlesId: string[] = []\n  private articlesMeta: ArticleMeta[] = []\n  private isLoading = false\n  private filterOptions: FilterOption[] = []\n\n  @Watch('$route')\n  private async onRouteChange (newRoute: Route) {\n    await this.detectFilterOptions(newRoute)\n  }\n\n  private get filteredArticlesMeta () {\n    if (this.filterOptions.length === 0) {\n      return this.articlesMeta\n    }\n    return this.articlesMeta\n      .filter((articleMeta) => {\n        const options = this.filterOptions\n        const handlers = {\n          category: (option: FilterOption) => articleMeta.category === option.value,\n          tag: (option: FilterOption) => articleMeta.tags.includes(option.value)\n        }\n        return options.map((option) => handlers[option.accordingTo](option))\n          .some((match) => match)\n      })\n  }\n\n  private get sortedArticlesMeta () {\n    return this.filteredArticlesMeta\n      .sort((a, b) => new Date(a.createdTime).getTime() - new Date(b.createdTime).getTime())\n  }\n\n  private get isDevelopment () {\n    return appModule.isDevelopment\n  }\n\n  private async loadAllArticlesId () {\n    this.isLoading = true\n    const { articles } = await getArticleList()\n    this.articlesId = articles\n    this.isLoading = false\n  }\n\n  private async loadNextPageMetas () {\n    this.isLoading = true\n    const nextPage = this.currentPage + 1\n    const articlesId = this.articlesId.filter((id, index) => {\n      return index >= (nextPage - 1) * COUNT_OF_ARTICLES_PER_PAGE &&\n              index < nextPage * COUNT_OF_ARTICLES_PER_PAGE\n    })\n\n    if (articlesId.length === 0) {\n      await delay(300)\n      this.isLoading = false\n      return\n    }\n\n    const nextPageMetas = await Promise.all(articlesId.map((id) => getArticleMeta(id)))\n    this.articlesMeta.push(...nextPageMetas)\n\n    this.currentPage += 1\n\n    await delay(500)\n    this.isLoading = false\n  }\n\n  private async loadInitData () {\n    await this.loadAllArticlesId()\n    await this.loadNextPageMetas()\n  }\n\n  private async detectFilterOptions (route: Route) {\n    this.isLoading = true\n    const filterOptions: FilterOption[] = []\n    const { query } = route\n    if (query.tags) {\n      (query.tags as string).split(',').forEach((tag) => filterOptions.push({\n        accordingTo: 'tag',\n        value: tag\n      }))\n    }\n\n    if (query.categories) {\n      (query.categories as string).split(',').forEach((category) => filterOptions.push({\n        accordingTo: 'category',\n        value: category\n      }))\n    }\n\n    this.filterOptions = filterOptions\n\n    await delay(300)\n    this.isLoading = false\n  }\n\n  public async mounted () {\n    await this.loadInitData()\n    await this.detectFilterOptions(this.$route)\n    this.$emit('render')\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=76ccbebe&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=ts&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}