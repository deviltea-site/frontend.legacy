{"version":3,"sources":["webpack:///./src/components/Article/ContentSection.vue?60ed","webpack:///./src/components/Article/ContentSection.vue","webpack:///./src/components/Article/ContentSection.vue?b63b","webpack:///./src/components/Article/ContentSection.vue?004b","webpack:///./src/components/Article/MetaHeader.vue?2d63","webpack:///./src/components/Article/MetaHeader.vue","webpack:///./src/components/Article/MetaHeader.vue?9b8f","webpack:///./src/components/Article/MetaHeader.vue?bfa8","webpack:///./src/pages/Article.vue?55f5","webpack:///./src/pages/Article.vue","webpack:///./src/pages/Article.vue?e9a6","webpack:///./src/pages/Article.vue?2542"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","domProps","_s","content","staticRenderFns","intersectionObserver","createIntersectionObserver","$nextTick","contentDOM","document","getElementById","querySelectorAll","forEach","img","observe","destroyIntersectionObserver","IntersectionObserver","entries","observer","entry","isIntersecting","target","src","getAttribute","unobserve","_img","Image","onload","after","remove","classList","add","width","height","setAttribute","disconnect","onContentChange","component","_v","meta","title","timeInfo","prefix","date","toLocaleString","name","query","categories","category","tags","length","_l","tag","key","_e","description","updatedTime","Date","createdTime","class","loading","isLoading","params","articleId","$route","$router","replace","catch","head","reset","ogTitle","ogDescription","loadInitData","updateHead","$emit","app","isDevelopment","components","CircularProgress","MetaHeader","ContentSection","DIcon","DButton"],"mappings":"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","file":"js/chunk-938703ce.9f38f0dc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"content-section\",attrs:{\"id\":\"content\"},domProps:{\"innerHTML\":_vm._s(_vm.content)}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { delay } from '../../utils/util'\n\n@Component({})\nexport default class ContentSection extends Vue {\n  @Prop() private content!: string\n\n  private intersectionObserver: IntersectionObserver | null = null\n\n  @Watch('content')\n  private async onContentChange () {\n    this.createIntersectionObserver()\n    await this.$nextTick()\n    const contentDOM = document.getElementById('content')\n    if (contentDOM === null) return\n    contentDOM.querySelectorAll('img.loading')\n      .forEach((img) => {\n        if (this.intersectionObserver === null) return\n        this.intersectionObserver.observe(img)\n      })\n  }\n\n  private createIntersectionObserver () {\n    this.destroyIntersectionObserver()\n    this.intersectionObserver = new IntersectionObserver((entries, observer) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const img = entry.target as HTMLImageElement\n          const src = img.getAttribute('data-src')\n          observer.unobserve(img)\n          if (src !== null) {\n            const _img = new Image()\n            _img.onload = async () => {\n              delay(500)\n              img.after(_img)\n              img.remove()\n            }\n            _img.src = src\n            _img.classList.add('loaded')\n            const width = img.getAttribute('width')\n            const height = img.getAttribute('height')\n            if (width !== null) _img.setAttribute('width', width)\n            if (height !== null) _img.setAttribute('height', height)\n          }\n        }\n      })\n    })\n  }\n\n  private destroyIntersectionObserver () {\n    if (this.intersectionObserver !== null) {\n      this.intersectionObserver.disconnect()\n      this.intersectionObserver = null\n    }\n  }\n\n  private mounted () {\n    this.onContentChange()\n  }\n\n  private beforeDestroyed () {\n    this.destroyIntersectionObserver()\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentSection.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContentSection.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ContentSection.vue?vue&type=template&id=7f382e44&\"\nimport script from \"./ContentSection.vue?vue&type=script&lang=ts&\"\nexport * from \"./ContentSection.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"meta-header\"},[_c('h1',{staticClass:\"meta-header__title\"},[_vm._v(_vm._s(_vm.meta.title))]),_c('div',{staticClass:\"meta-header__date\"},[_c('span',[_vm._v(_vm._s(_vm.timeInfo.prefix))]),_c('span',[_vm._v(_vm._s(_vm.timeInfo.date.toLocaleString()))])]),_c('div',{staticClass:\"category-tags-wrapper\"},[_c('div',{staticClass:\"category\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"分類：\")]),_c('router-link',{staticClass:\"category__link\",attrs:{\"to\":{ name: 'ArticleList', query: { categories: _vm.meta.category } }}},[_vm._v(_vm._s(_vm.meta.category))])],1),(_vm.meta.tags.length > 0)?_c('div',{staticClass:\"tags\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"標籤：\")]),_vm._l((_vm.meta.tags),function(tag){return _c('router-link',{key:(\"article-\" + (_vm.meta.id) + \"-tag-\" + tag),staticClass:\"tags__tag\",attrs:{\"to\":{ name: 'ArticleList', query: { tags: tag } }}},[_vm._v(\" \"+_vm._s(tag)+\" \")])})],2):_vm._e()]),_c('div',{staticClass:\"meta-header__description\"},[_vm._v(_vm._s(_vm.meta.description))]),_c('hr',{staticClass:\"divider\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport { ArticleMeta } from '@/interfaces/Article'\n\n  @Component({})\nexport default class MetaHeader extends Vue {\n  @Prop() private meta!: ArticleMeta\n\n  private get timeInfo () {\n    return {\n      prefix: this.meta.updatedTime ? '上次更新' : '發表時間',\n      date: new Date(this.meta.updatedTime || this.meta.createdTime)\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MetaHeader.vue?vue&type=template&id=3375e032&\"\nimport script from \"./MetaHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./MetaHeader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"view-container content-container\",class:{\n    loading: _vm.isLoading\n  },attrs:{\"id\":\"article\"}},[(_vm.isLoading)?_c('CircularProgress',{attrs:{\"color\":\"#ccc\"}}):_c('article',{staticClass:\"article-body\"},[_c('MetaHeader',{attrs:{\"meta\":_vm.meta}}),_c('ContentSection',{attrs:{\"content\":_vm.content}})],1),(_vm.isDevelopment)?_c('DButton',{staticClass:\"edit-article-btn\",attrs:{\"to\":{\n    name: 'EditArticle',\n    params: {\n      articleId: _vm.$route.params.articleId\n    }\n  }}},[_c('DIcon',{attrs:{\"name\":\"pencil\"}}),_c('span',[_vm._v(\"編輯文章\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component } from 'vue-property-decorator'\nimport CircularProgress from '@/components/Basic/CircularProgress.vue'\nimport MetaHeader from '@/components/Article/MetaHeader.vue'\nimport ContentSection from '@/components/Article/ContentSection.vue'\nimport DButton from '@/components/Basic/DButton.vue'\nimport DIcon from '@/components/Basic/DIcon.vue'\nimport { getArticleMeta, getArticleContent } from '@/controllers/articles'\nimport { ArticleMeta } from '@/interfaces/Article'\nimport head from '@/utils/head'\nimport { delay } from '@/utils/util'\nimport '@/assets/scss/pages/article.scss'\nimport appModule from '@/store/modules/app'\n\n@Component({\n  components: {\n    CircularProgress,\n    MetaHeader,\n    ContentSection,\n    DIcon,\n    DButton\n  }\n})\nexport default class Article extends Vue {\n  private content = ''\n  private meta: ArticleMeta | null = null\n  private isLoading = true\n\n  private get isDevelopment () {\n    return appModule.isDevelopment\n  }\n\n  private async loadInitData () {\n    try {\n      const articleId = this.$route.params.articleId\n      this.meta = await getArticleMeta(articleId)\n      this.content = await getArticleContent(articleId)\n    } catch (error) {\n      await this.$router.replace({\n        name: 'NotFound'\n      }).catch(() => null)\n    }\n    await delay(300)\n  }\n\n  private updateHead () {\n    head.reset()\n    if (this.meta === null) return\n    const { title, description } = this.meta\n    if (title) {\n      head.title(title)\n      head.ogTitle(title)\n    }\n    if (description) {\n      head.description(description)\n      head.ogDescription(description)\n    }\n  }\n\n  public async mounted () {\n    this.isLoading = true\n    await this.loadInitData()\n    this.updateHead()\n    this.$emit('render')\n    this.isLoading = false\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=13e071ed&\"\nimport script from \"./Article.vue?vue&type=script&lang=ts&\"\nexport * from \"./Article.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}